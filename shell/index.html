



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.1">
    
    
      
        <title>Shell</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.3020aac5.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#the-shell" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../fs/" title="Rivetlogic introduction to *nix subsystems." class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Rivetlogic introduction to *nix subsystems.
            </span>
            <span class="md-header-nav__topic">
              Shell
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../fs/" title="Rivetlogic introduction to *nix subsystems." class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Rivetlogic introduction to *nix subsystems.
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="." title="Shell" class="md-nav__link">
      Shell
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Common
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Common
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/alias/" title="alias" class="md-nav__link">
      alias
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/cat/" title="cat" class="md-nav__link">
      cat
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/cd/" title="cd" class="md-nav__link">
      cd
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/clear/" title="clear" class="md-nav__link">
      clear
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/cp/" title="cp" class="md-nav__link">
      cp
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/date/" title="date" class="md-nav__link">
      date
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/echo/" title="echo" class="md-nav__link">
      echo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/grep/" title="grep" class="md-nav__link">
      grep
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/head/" title="head" class="md-nav__link">
      head
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/history/" title="history" class="md-nav__link">
      history
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/killall/" title="killall" class="md-nav__link">
      killall
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/kill/" title="kill" class="md-nav__link">
      kill
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/less/" title="less" class="md-nav__link">
      less
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/ls/" title="ls" class="md-nav__link">
      ls
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/man/" title="man" class="md-nav__link">
      man
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/mkdir/" title="mkdir" class="md-nav__link">
      mkdir
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/more/" title="more" class="md-nav__link">
      more
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/mv/" title="mv" class="md-nav__link">
      mv
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/pwd/" title="pwd" class="md-nav__link">
      pwd
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/rmdir/" title="rmdir" class="md-nav__link">
      rmdir
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/rm/" title="rm" class="md-nav__link">
      rm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/tail/" title="tail" class="md-nav__link">
      tail
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cmds/common/touch/" title="touch" class="md-nav__link">
      touch
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../fs/" title="Filesystem" class="md-nav__link">
      Filesystem
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../references/" title="References" class="md-nav__link">
      References
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">

  
    <label class="md-nav__title" for="__toc">Table of contents</label>
  

    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-shell" title="The Shell" class="md-nav__link">
    The Shell
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shell-operation" title="Shell Operation" class="md-nav__link">
    Shell Operation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variables" title="Variables" class="md-nav__link">
    Variables
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path" title="$PATH" class="md-nav__link">
    $PATH
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pattern-matching" title="Pattern Matching" class="md-nav__link">
    Pattern Matching
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shell-expansions" title="Shell Expansions" class="md-nav__link">
    Shell Expansions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alias" title="Alias" class="md-nav__link">
    Alias
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exit-status" title="Exit Status" class="md-nav__link">
    Exit Status
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pipes-and-redirections" title="Pipes and Redirections" class="md-nav__link">
    Pipes and Redirections
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lists-of-commands" title="Lists of Commands" class="md-nav__link">
    Lists of Commands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shell-scripts" title="Shell Scripts" class="md-nav__link">
    Shell Scripts
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conditionals" title="Conditionals" class="md-nav__link">
    Conditionals
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ifelse-if-else" title="If,else &amp; If else" class="md-nav__link">
    If,else &amp; If else
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case" title="Case" class="md-nav__link">
    Case
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loops" title="Loops" class="md-nav__link">
    Loops
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#functions" title="Functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variables-scope" title="Variables Scope" class="md-nav__link">
    Variables Scope
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#return-values" title="Return Values" class="md-nav__link">
    Return Values
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arguments" title="Arguments" class="md-nav__link">
    Arguments
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="the-shell">The Shell<a class="headerlink" href="#the-shell" title="Permanent link">&para;</a></h1>
<p>Unix shell is a command-line interpreter or shell that provides a command line user interface for 
Unix-like operating systems. 
The shell is both an interactive command language and a scripting language, 
and is used by the operating system to control the execution of the system using shell scripts.</p>
<h1 id="shell-operation">Shell Operation<a class="headerlink" href="#shell-operation" title="Permanent link">&para;</a></h1>
<p>The following is a brief description of the shell’s operation when it reads and executes a command.
Basically, the shell does the following:</p>
<ol>
<li>Reads its input from a file (see <a href="#shell-scripts">Shell Scripts</a>) or from the user’s terminal.</li>
<li>Breaks the input into words and operators. 
   These tokens are separated by metacharacters. Alias expansion is performed by this step (see <a href="#alias">Alias</a>).</li>
<li>Parses the tokens into simple and compound commands.</li>
<li>Performs the various shell expansions, 
   breaking the expanded tokens into lists of filenames and commands and arguments.</li>
<li>Performs any necessary redirections (see <a href="#pipes-and-redirections">Pipes and Redirections</a>)
   and removes the redirection operators and 
   their operands from the argument list.</li>
<li>Executes the command.</li>
<li>Optionally waits for the command to complete and collects its exit status (see Exit Status).</li>
</ol>
<h1 id="variables">Variables<a class="headerlink" href="#variables" title="Permanent link">&para;</a></h1>
<p>As in any other programming language, the shell has variables, these variables do not have any datatype as they can store a number, a character, a string of characters or lists. All variables are global to the current shell session (but not to a sub-process) 
The standard practice is that variables are always in uppercase, but there is no technical reason why they can&rsquo;t be in lowercase.</p>
<p>To create a variable name it, and assign a value to it</p>
<div class="codehilite"><pre><span></span><span class="nv">MY_VAR</span><span class="o">=</span><span class="s2">&quot;hello&quot;</span>
</pre></div>


<p>To access a variable, add the <code>$</code> prefix to the name of the variable </p>
<div class="codehilite"><pre><span></span><span class="nb">echo</span> <span class="nv">$MY_VAR</span>
</pre></div>


<p>The shell can also, expand variables within strings created by double-quotes <code>"</code> </p>
<div class="codehilite"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot;The value of MY_VAR is </span><span class="nv">$MY_VAR</span><span class="s2">&quot;</span>
</pre></div>


<p>Using  <code>export</code> in front of a variable makes the variable available to sub-processes. This variables, also call Environment Variables</p>
<div class="codehilite"><pre><span></span><span class="nb">export</span> <span class="nv">JAVA_HOME</span><span class="o">=</span>/opt/java
</pre></div>


<p>Variables are always expanded before running the command (step 4, of Shell Operation)</p>
<p>Shells like bash, zsh, and fish will run scripts on there initialization that populate variables, this scripts can for all users, 
and each user can define it&rsquo;s own (.bashrc or .bash_profile for bash, .zshrc for zsh) in user&rsquo;s home dirrectory. 
These variables will be always present in the shell session. Examples of these variables are:</p>
<ul>
<li>USER, current user name</li>
<li>HOSTNAME, name of the machine</li>
<li>SHELL, current shell</li>
<li>PATH, list of directories where the shell will look up for commands.</li>
</ul>
<h2 id="path">$PATH<a class="headerlink" href="#path" title="Permanent link">&para;</a></h2>
<p>The $PATH variable is one of the most important variable in a shell session, since it&rsquo;s a list of directories where the shell will look for executables (binaries, or scripts). The shell will always use the first binary found, so a user can override this variable to change which binary will be used. 
This change can done to a current shell session or make it permanent by adding the override in the shell initialization script.</p>
<div class="codehilite"><pre><span></span><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/my/bin/location:<span class="nv">$PATH</span>
</pre></div>


<h1 id="pattern-matching">Pattern Matching<a class="headerlink" href="#pattern-matching" title="Permanent link">&para;</a></h1>
<p>Also known as globbing or glob, is a term used to describe the expansion or the match of values returned when using wildcards, regular expressions, or other pattern matches. 
The special pattern characters (or wildcards) have the following meanings:</p>
<ul>
<li><code>*</code> Matches any string, including the null string. </li>
<li><code>?</code>  Matches any single character. </li>
<li><code>[…]</code> Matches any one of the enclosed characters. A pair of characters separated by a hyphen denotes a range expression; </li>
<li><code>?(pattern-list)</code> Matches zero or one occurrence of the given patterns.</li>
<li><code>*(pattern-list)</code> Matches zero or more occurrences of the given patterns.</li>
<li><code>+(pattern-list)</code> Matches one or more occurrences of the given patterns.</li>
<li><code>@(pattern-list)</code> Matches one of the given patterns.</li>
<li><code>!(pattern-list)</code> Matches anything except one of the given patterns. </li>
</ul>
<p>Examples:</p>
<div class="codehilite"><pre><span></span>ls *.jar
</pre></div>


<div class="codehilite"><pre><span></span>ls ch<span class="o">[</span>e<span class="o">]</span>*
</pre></div>


<h2 id="shell-expansions">Shell Expansions<a class="headerlink" href="#shell-expansions" title="Permanent link">&para;</a></h2>
<p>An expansion is performed on the command line after it has been split into tokens. There are seven kinds of expansion performed:</p>
<ul>
<li>brace expansion Brace expansion is a mechanism by which arbitrary strings may be generated. </li>
</ul>
<div class="codehilite"><pre><span></span><span class="nb">echo</span> a<span class="o">{</span>d,c,b<span class="o">}</span>e
</pre></div>


<ul>
<li>tilde expansion The tilde (~) may be used to refer your own home directory or other users home directory.<ul>
<li>If the tilde-prefix is a ~+, the value of the shell variable PWD replaces the tilde-prefix</li>
<li>If the tilde-prefix is a ~-, the value of the shell variable OLDPWD, if it is set, is substituted.</li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span>ls ~
</pre></div>


<div class="codehilite"><pre><span></span><span class="nb">cd</span> /etc
<span class="nb">pwd</span>
<span class="nb">cd</span> /bin
<span class="nb">pwd</span>
<span class="nb">echo</span> <span class="nv">$OLDPWD</span>
<span class="c1"># display /etc/ directory listing and not /bin</span>
ls ~-
</pre></div>


<ul>
<li>parameter and variable expansion The ‘$’ character introduces parameter expansion, command substitution, or arithmetic expansion. </li>
</ul>
<div class="codehilite"><pre><span></span><span class="nv">string</span><span class="o">=</span>01234567890abcdefgh
<span class="nb">echo</span> <span class="si">${</span><span class="nv">string</span><span class="p">:</span><span class="nv">7</span><span class="si">}</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">string</span><span class="p">: -7:</span><span class="nv">2</span><span class="si">}</span>
</pre></div>


<ul>
<li>command substitution allows the output of a command to replace the command itself.</li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">$(</span><span class="nb">command</span><span class="k">)</span>
<span class="sb">`</span><span class="nb">command</span><span class="sb">`</span>
</pre></div>


<ul>
<li>arithmetic expansion allows the evaluation of an arithmetic expression and the substitution of the result.</li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">$((</span> expression <span class="k">))</span>
</pre></div>


<ul>
<li>process substitution allows a process’s input or output to be referred to using a filename. </li>
</ul>
<div class="codehilite"><pre><span></span>&lt;<span class="o">(</span>list<span class="o">)</span>
&gt;<span class="o">(</span>list<span class="o">)</span>
</pre></div>


<ul>
<li>
<p>word splitting The shell scans the results of parameter expansion, command substitution, 
 and arithmetic expansion that did not occur within double quotes for word splitting. </p>
</li>
<li>
<p><a href="#pattern-matching">filename expansion</a></p>
</li>
</ul>
<h1 id="alias">Alias<a class="headerlink" href="#alias" title="Permanent link">&para;</a></h1>
<p>An alias is a keyboard shortcut, an abbreviation to avoiding typing a long command sequence</p>
<div class="codehilite"><pre><span></span><span class="nb">alias</span> <span class="nv">la</span><span class="o">=</span>ls -alh
</pre></div>


<p>The command-line will automatically be replaced <code>la</code> with <code>ls -alh</code> 
Aliases can be set by shell session or, permanent by adding them in the shell initialization script.</p>
<p>Aliases can be named same as commands, this aliases will take priority over the actual command regardless of its position 
in the <em>$PATH</em> variable this is useful when, we want to add default arguments and options to the command, for example</p>
<div class="codehilite"><pre><span></span><span class="nb">alias</span> <span class="nv">grep</span><span class="o">=</span><span class="s1">&#39;grep --color&#39;</span>
</pre></div>


<p>List of common and useful aliases.</p>
<div class="codehilite"><pre><span></span><span class="c1"># Search Through Terminal History</span>
<span class="nb">alias</span> <span class="nv">hs</span><span class="o">=</span><span class="s1">&#39;history | grep&#39;</span>
<span class="c1">#Open file with admin access</span>
<span class="nb">alias</span> <span class="nv">snano</span><span class="o">=</span><span class="s1">&#39;sudo nano&#39;</span>
<span class="c1">#clear terminal screen</span>
<span class="nb">alias</span> <span class="nv">c</span><span class="o">=</span><span class="s1">&#39;clear&#39;</span>
<span class="c1"># Shows all open ports</span>
<span class="nb">alias</span> <span class="nv">ports</span><span class="o">=</span><span class="s1">&#39;netstat -tulanp&#39;</span>
<span class="c1">#Tail a file </span>
<span class="nb">alias</span> <span class="nv">t</span><span class="o">=</span><span class="s1">&#39;tail -f&#39;</span>
</pre></div>


<h1 id="exit-status">Exit Status<a class="headerlink" href="#exit-status" title="Permanent link">&para;</a></h1>
<p>The <a href="https://en.wikipedia.org/wiki/POSIX">Portable Operating System Interface (POSIX)</a>  defines that all process should have an exit code. Exit codes are a number between 0 and 255, which is returned by any Unix command when it returns control to its parent process. 
0 always means that the command was run successfully, any other number, will be interpreted as an error by the shell.</p>
<p>Most POSIX compliant shells will store the Exit code in a variable named <code>$?</code></p>
<div class="codehilite"><pre><span></span>ls 
<span class="nb">echo</span> <span class="nv">$?</span>
ls IdontExist
<span class="nb">echo</span> <span class="nv">$?</span>
</pre></div>


<p>The first <code>echo $?</code> will return <em>0</em>, since ls run without any issue, The following <code>echo $?</code> will return <em>2</em> since, ls was not run successfully, since, <em>IdontExist</em> well, does not exists.</p>
<h1 id="pipes-and-redirections">Pipes and Redirections<a class="headerlink" href="#pipes-and-redirections" title="Permanent link">&para;</a></h1>
<blockquote>
<p>Write programs that do one thing and do it well. Write programs to work together. Write programs to handle text
streams, because that is a universal interface.</p>
<p>&mdash;  Peter H. Salus. A Quarter-Century of Unix. Addison-Wesley. 1994. ISBN 0-201-54777-5.</p>
</blockquote>
<p>Commands can send and receive output from other commands using pipelines and redirections. They both do the same basic
thing; they redirect a file descriptor of the process executed.</p>
<p>Pipe is used to pass output to another <strong>program or utility.</strong></p>
<p>Redirect is used to pass output to either a <strong>file or stream.</strong></p>
<p>A pipeline is a sequence of one or more commands separated by one of the control operators ‘|’ or ‘|&amp;’. </p>
<p>The output of each command in the pipeline is connected via a pipe to the input of the next command. That is, each
command reads the previous command’s output.</p>
<div class="codehilite"><pre><span></span>ls <span class="p">|</span> head -3
</pre></div>


<p>In the example above we send the output of <code>ls</code> to <code>head -3</code> so we only print the first 3 results of <code>ls</code></p>
<p>A pipe connects the stdout of one process to the stdin of another.</p>
<p>Redirection allows commands’ file handles to be duplicated, opened, closed, made to refer to different 
files, and can change the files the command reads from and writes to.</p>
<p>At any given time there are always three default files descriptors open, <em>stdin</em> (the keyboard), <em>stdout</em> (the screen), 
and <em>stderr</em> (error messages output to the screen). 
The file descriptors for <em>stdin</em>, <em>stdout</em>, and <em>stderr</em> are <em>0</em>, <em>1</em>, and <em>2</em>, respectively.</p>
<p><code>&gt;</code> (<code>&gt;</code> is the same as <code>1&gt;</code>) is the simplest redirection, this will redirect all <em>stdout</em> to a given file.</p>
<div class="codehilite"><pre><span></span>ls &gt; results.txt
</pre></div>


<p>This will redirect the output of <code>ls</code> to a file named <code>results.txt</code></p>
<p>We can also &ldquo;merge&rdquo; two file descriptors to point to the same file, this is useful when we want to have the output of <em>stdout</em> and <em>stderr</em> in the same file. To point them to the same file descriptor we use <code>2&gt;&amp;1</code> ( same as &amp;&gt;)</p>
<p>That means that the output of 2 (<em>stderr</em>) should be redirected to 1 (<em>stdout</em>).</p>
<div class="codehilite"><pre><span></span>ls  <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span> &gt; output.txt
</pre></div>


<p>In this sequence, we tell the shell that we want the output of  <em>stderr</em>(2) to be redirected to <em>stdout</em>(1) and the second <code>&gt;</code> will send the output of <em>stdout</em> (now merge with <em>stderr</em>) to a file name output.txt </p>
<p>Redirrections will delete any information at there destination before writing anything, to avoid that the <code>&gt;&gt;</code> redirect should be used, when used, it will append the new output at the end of the destination.</p>
<p>It is also possible to redirect <em>stdin</em> of a command by using <code>&lt;</code> this will read the given file descriptor and send it to the command <em>stdin</em>.</p>
<div class="codehilite"><pre><span></span>    cat &lt; myFile.txt
</pre></div>


<p>By default <code>cat</code>  will listen to <em>stdin</em> until the EOF character  (ctrl-d) is sent. In the past example, change <em>stdin</em> to be a file.</p>
<h1 id="lists-of-commands">Lists of Commands<a class="headerlink" href="#lists-of-commands" title="Permanent link">&para;</a></h1>
<p>It&rsquo;s possible to run multiple commands as a single line making a list of commands to be run, 
the list is made by using <code>;</code> between the commands that we want to run.</p>
<div class="codehilite"><pre><span></span>command1 <span class="p">;</span> command2<span class="p">;</span> <span class="nb">command</span> <span class="m">3</span> <span class="p">|</span> command3.1 &gt; myoutput.txt <span class="p">;</span> <span class="nb">command</span> <span class="m">4</span>
</pre></div>


<p>It&rsquo;s also possible to run the next command depending on the exit value by using <code>&amp;&amp;</code> (AND)  or <code>||</code> (OR)</p>
<div class="codehilite"><pre><span></span>command1 <span class="o">&amp;&amp;</span> command2
</pre></div>


<p><code>command2</code> is executed if, and only if, <code>command1</code> <strong>returns an exits status of zero (success).</strong></p>
<div class="codehilite"><pre><span></span>command1 <span class="o">||</span> command2
</pre></div>


<p><code>command2</code> is executed if, and only if, <code>command1</code> <strong>returns a non-zero exit status.</strong></p>
<p>The return status of AND and OR lists is the exit status of the last command executed in the list</p>
<p>‘&amp;&amp;’ and ‘||’ have equal precedence, followed by ‘;’ and ‘&amp;’, which have equal precedence </p>
<h1 id="shell-scripts">Shell Scripts<a class="headerlink" href="#shell-scripts" title="Permanent link">&para;</a></h1>
<p>Shells can also read a file, and execute the commands within the file this file is commonly known as shell scripts. Each shell can have its own syntax for these files, but in this guide, we will use the most common syntax, the <code>sh</code> which is also compatible with <code>zsh</code> shell.</p>
<p>It&rsquo;s common to add <code>#!</code> as the first line of the scripts, this tells the shell which interpreter should be used to execute the script. <code>#!</code> is also known as <em>shebang</em>  and its <strong>always</strong> followed by the full path of the interpreter that will run the script.</p>
<div class="codehilite"><pre><span></span><span class="ch">#!/usr/bin/bash </span>
<span class="nb">echo</span> <span class="s2">&quot;Hello World&quot;</span>
</pre></div>


<p>This will make our file to be interpreted by bash, it&rsquo;s also possible to use other interpreters like python, ruby,  nodejs and since Java 10, Java.</p>
<div class="codehilite"><pre><span></span><span class="ch">#!/usr/bin/python3 </span>
print<span class="o">(</span><span class="s2">&quot;Hello World&quot;</span><span class="o">)</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="ch">#!/usr/bin/env node</span>
const <span class="nv">http</span> <span class="o">=</span> require<span class="o">(</span><span class="s1">&#39;http&#39;</span><span class="o">)</span><span class="p">;</span>

const <span class="nv">hostname</span> <span class="o">=</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">;</span>
const <span class="nv">port</span> <span class="o">=</span> <span class="m">3000</span><span class="p">;</span>

const <span class="nv">server</span> <span class="o">=</span> http.createServer<span class="o">((</span>req, res<span class="o">)</span> <span class="o">=</span>&gt; <span class="o">{</span>
  res.statusCode <span class="o">=</span> <span class="m">200</span><span class="p">;</span>
  res.setHeader<span class="o">(</span><span class="s1">&#39;Content-Type&#39;</span>, <span class="s1">&#39;text/plain&#39;</span><span class="o">)</span><span class="p">;</span>
  res.end<span class="o">(</span><span class="s1">&#39;Hello World\n&#39;</span><span class="o">)</span><span class="p">;</span>
<span class="o">})</span><span class="p">;</span>

server.listen<span class="o">(</span>port, hostname, <span class="o">()</span> <span class="o">=</span>&gt; <span class="o">{</span>
  console.log<span class="o">(</span><span class="sb">`</span>Server running at http://<span class="si">${</span><span class="nv">hostname</span><span class="si">}</span>:<span class="si">${</span><span class="nv">port</span><span class="si">}</span>/<span class="sb">`</span><span class="o">)</span><span class="p">;</span>
<span class="o">})</span><span class="p">;</span>
</pre></div>


<p>It is possible to the a script to use a specific version of a interpreter like the python example, or let the environment decided (node js example) which interpreter will be used (usualy, its the first found in the <em>$PATH</em> variable), the latter is the best practice.</p>
<h2 id="conditionals">Conditionals<a class="headerlink" href="#conditionals" title="Permanent link">&para;</a></h2>
<h3 id="ifelse-if-else">If,else &amp; If else<a class="headerlink" href="#ifelse-if-else" title="Permanent link">&para;</a></h3>
<p>The <em>test-commands</em> list is executed, and if its return status is zero, the consequent-commands list is executed.</p>
<ul>
<li>If</li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="o">[</span> test-commands  <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    &lt;commands&gt;
<span class="k">fi</span>
</pre></div>


<ul>
<li>If else</li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="o">[</span> test-commands  <span class="o">]</span>
<span class="k">then</span>
&lt;commands&gt;
<span class="k">else</span>
&lt;other commands&gt;
<span class="k">fi</span>
</pre></div>


<ul>
<li>If else if else</li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="o">[</span> test-commands  <span class="o">]</span>
<span class="k">then</span>
&lt;commands&gt;
<span class="k">elif</span> <span class="o">[</span> test-commands <span class="o">]</span>
<span class="k">then</span>
&lt;different commands&gt;
<span class="k">else</span>
&lt;other commands&gt;
<span class="k">fi</span>
</pre></div>


<p>Test Expressions </p>
<ul>
<li>! EXPRESSION     The EXPRESSION is false.</li>
<li>-n STRING     The length of STRING is greater than zero.</li>
<li>-z STRING     The lengh of STRING is zero (ie it is empty).</li>
<li>STRING1 = STRING2     STRING1 is equal to STRING2</li>
<li>STRING1 != STRING2     STRING1 is not equal to STRING2</li>
<li>INTEGER1 -eq INTEGER2     INTEGER1 is numerically equal to INTEGER2</li>
<li>INTEGER1 -gt INTEGER2     INTEGER1 is numerically greater than INTEGER2</li>
<li>INTEGER1 -lt INTEGER2     INTEGER1 is numerically less than INTEGER2</li>
<li>INTEGER1 -ge INTEGER2     INTEGER1 is numerically greater or equal than INTEGER2</li>
<li>INTEGER1 -le INTEGER2     INTEGER1 is numerically less or equal than INTEGER2</li>
<li>-d FILE     FILE exists and is a directory.</li>
<li>-e FILE     FILE exists.</li>
<li>-r FILE     FILE exists and the read permission is granted.</li>
<li>-s FILE     FILE exists and it&rsquo;s size is greater than zero (ie. it is not empty).</li>
<li>-w FILE     FILE exists and the write permission is granted.</li>
<li>-x FILE     FILE exists and the execute permission is granted.</li>
</ul>
<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="o">[</span> <span class="nv">$value</span> -eq <span class="m">1</span> <span class="o">]</span>
<span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">&quot;has value&quot;</span>
<span class="k">fi</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="nv">my_file</span><span class="o">=</span><span class="s2">&quot;myfile.txt&quot;</span>

<span class="k">if</span> <span class="o">[</span> -s <span class="nv">$my_file</span> <span class="o">]</span>
<span class="k">then</span>
  cat <span class="nv">$my_file</span>
<span class="k">else</span>
  <span class="nb">echo</span> <span class="s2">&quot;File not found&quot;</span>
<span class="k">fi</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="nv">my_var</span><span class="o">=</span><span class="m">2</span>

<span class="k">if</span> <span class="o">[</span> <span class="nv">$my_var</span> -gt <span class="m">0</span> <span class="o">]</span>
<span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">&quot;More than 2&quot;</span>
<span class="k">elif</span> <span class="o">[</span> <span class="nv">$my_var</span> -lt <span class="m">0</span> <span class="o">]</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;it&#39;s negative&quot;</span>
<span class="k">else</span>
  <span class="nb">echo</span> <span class="s2">&quot;it&#39;s zero&quot;</span>
<span class="k">fi</span>
</pre></div>


<h3 id="case">Case<a class="headerlink" href="#case" title="Permanent link">&para;</a></h3>
<p><code>case</code> will selectively execute the command-list corresponding to the first pattern that matches the word.</p>
<div class="codehilite"><pre><span></span><span class="k">case</span> &lt;variable&gt; in
&lt;pattern <span class="m">1</span>&gt;<span class="o">)</span>
    commands
<span class="p">;;</span>
&lt;pattern <span class="m">2</span>&gt;<span class="o">)</span>
    other_command
<span class="p">;;</span>
    *<span class="o">)</span>
     defautl_command
    <span class="p">;;</span>
<span class="k">esac</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">case</span> <span class="nv">$action</span> in
    start<span class="o">)</span>
        <span class="nb">echo</span> starting
    <span class="p">;;</span>
    stop<span class="o">)</span>
        <span class="nb">echo</span> stoping
    <span class="p">;;</span>
    restart<span class="o">)</span>
        <span class="nb">echo</span> restarting
    <span class="p">;;</span>
    *<span class="o">)</span>
        <span class="nb">echo</span> don<span class="se">\&#39;</span>t know
    <span class="p">;;</span>
<span class="k">esac</span>
</pre></div>


<h2 id="loops">Loops<a class="headerlink" href="#loops" title="Permanent link">&para;</a></h2>
<ul>
<li><code>until</code> Execute consequent-commands as long as test-commands has an exit status which is not zero.</li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">until</span> test-commands<span class="p">;</span> <span class="k">do</span> consequent-commands<span class="p">;</span> <span class="k">done</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="nv">count</span><span class="o">=</span><span class="m">1</span>
<span class="k">until</span> <span class="o">[</span> <span class="nv">$count</span> -gt <span class="m">5</span> <span class="o">]</span>
<span class="k">do</span>
   <span class="nb">printf</span> <span class="s2">&quot;Count has a value of </span><span class="nv">$count</span><span class="s2">\n&quot;</span>
  <span class="o">((</span>count++<span class="o">))</span>
<span class="k">done</span>
</pre></div>


<ul>
<li><code>while</code> Execute consequent-commands as long as test-commands has an exit status of zero. </li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">while</span> test-commands<span class="p">;</span> <span class="k">do</span> consequent-commands<span class="p">;</span> don
</pre></div>


<div class="codehilite"><pre><span></span><span class="nv">i</span><span class="o">=</span><span class="s2">&quot;0&quot;</span>
<span class="k">while</span> <span class="o">[</span> <span class="nv">$i</span> -lt <span class="m">4</span> <span class="o">]</span>
<span class="k">do</span>
    <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$i</span><span class="s2">&quot;</span>
    <span class="nv">i</span><span class="o">=</span>$<span class="o">[</span><span class="nv">$i</span>+1<span class="o">]</span>
<span class="k">done</span>
</pre></div>


<ul>
<li><code>for</code> Expand words (see Shell Expansions), and execute commands once for each member in the resultant list, with <code>name</code> bound to the current member (as internal loop variable $name)</li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">for</span> name <span class="o">[</span> <span class="o">[</span>in <span class="o">[</span>words …<span class="o">]</span> <span class="o">]</span> <span class="p">;</span> <span class="o">]</span> <span class="k">do</span> commands<span class="p">;</span> <span class="k">done</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">for</span> <span class="o">((</span> expr1 <span class="p">;</span> expr2 <span class="p">;</span> expr3 <span class="o">))</span> <span class="p">;</span> <span class="k">do</span> commands <span class="p">;</span> <span class="k">done</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">for</span> file in <span class="k">$(</span>ls<span class="k">)</span><span class="p">;</span> <span class="k">do</span> 
    <span class="nb">echo</span> <span class="s2">&quot;File is </span><span class="nv">$file</span><span class="s2">&quot;</span><span class="p">;</span>
 <span class="k">done</span>
</pre></div>


<h2 id="functions">Functions<a class="headerlink" href="#functions" title="Permanent link">&para;</a></h2>
<p>A function is essentially a set of commands that can be called numerous times. The purpose of a function is to help you make your bash scripts more readable and to avoid writing the same code over and over again.</p>
<div class="codehilite"><pre><span></span>function_name <span class="o">()</span> <span class="o">{</span>
  commands
<span class="o">}</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">function</span> function_name <span class="o">{</span>
  commands
<span class="o">}</span>
</pre></div>


<p>Variables can also have, the same name as commands, like an alias, this will always take precedence over the actual command. </p>
<p>Since all shell scripts are interpreted, functions must be declared, before using them.</p>
<h3 id="variables-scope">Variables Scope<a class="headerlink" href="#variables-scope" title="Permanent link">&para;</a></h3>
<p>Global variables are variables that can be accessed from anywhere in the script regardless of the scope.  All variables by default are defined as global, even if declared inside the function.</p>
<p>Local variables can be declared within the function body with the <em>local</em> and keyword and can be used only inside that function.</p>
<div class="codehilite"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">var1</span><span class="o">=</span><span class="s1">&#39;A&#39;</span>
<span class="nv">var2</span><span class="o">=</span><span class="s1">&#39;B&#39;</span>

my_function <span class="o">()</span> <span class="o">{</span>
  <span class="nb">local</span> <span class="nv">var1</span><span class="o">=</span><span class="s1">&#39;C&#39;</span>
  <span class="nv">var2</span><span class="o">=</span><span class="s1">&#39;D&#39;</span>
  <span class="nb">echo</span> <span class="s2">&quot;Inside function: var1: </span><span class="nv">$var1</span><span class="s2">, var2: </span><span class="nv">$var2</span><span class="s2">&quot;</span>
<span class="o">}</span>
<span class="nb">echo</span> <span class="s2">&quot;Before executing function: var1: </span><span class="nv">$var1</span><span class="s2">, var2: </span><span class="nv">$var2</span><span class="s2">&quot;</span>

my_function

<span class="nb">echo</span> <span class="s2">&quot;After executing function: var1: </span><span class="nv">$var1</span><span class="s2">, var2: </span><span class="nv">$var2</span><span class="s2">&quot;</span>
</pre></div>


<h3 id="return-values">Return Values<a class="headerlink" href="#return-values" title="Permanent link">&para;</a></h3>
<p>When a  function completes, its return value is the status of the last statement executed in the function</p>
<div class="codehilite"><pre><span></span>my_function <span class="o">()</span> <span class="o">{</span>
  <span class="nb">echo</span> <span class="s2">&quot;some result&quot;</span>
  <span class="k">return</span> <span class="m">55</span>
<span class="o">}</span>
my_function
<span class="nb">echo</span> <span class="nv">$?</span>
</pre></div>


<h3 id="arguments">Arguments<a class="headerlink" href="#arguments" title="Permanent link">&para;</a></h3>
<p>To pass any number of arguments to the bash function simply put them right after the function’s name <em>It is a best practice to double quote the arguments</em></p>
<p>*The passed parameters are <code>$1</code>, <code>$2</code>, <code>$3</code> … <code>$n</code>, corresponding to the position of the parameter after the function’s name.,</p>
<ul>
<li>
<p>The <code>$0</code> variable is reserved for the function’s name.</p>
</li>
<li>
<p>The<code>`$#</code> variable holds the number of positional parameters/arguments passed to the function.</p>
</li>
<li>
<p>The <code>$*</code> or <code>$@</code> variable holds all positional parameters/arguments passed to the function.</p>
</li>
</ul>
<div class="codehilite"><pre><span></span>greeting <span class="o">()</span> <span class="o">{</span>
  <span class="nb">echo</span> <span class="s2">&quot;Hello </span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="o">}</span>

greeting <span class="s2">&quot;Joe&quot;</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.dc02f8ce.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>